find_program(CMAKE_EXISTS "cmake")
if(CMAKE_EXISTS)
	message(STATUS "CMake Path: ${CMAKE_EXISTS}")
else()
	message(FATAL_ERROR "CMake is not found please install CMake version higher than 3.6.2")
endif()

if(NOT DEFINED PROJECT_DIR)
	set(PROJECT_DIR "${CMAKE_SOURCE_DIR}")
endif()
set_property(GLOBAL PROPERTY DEBUG_CONFIGURATIONS Debug)

set_property(GLOBAL PROPERTY USE_FOLDERS ON)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /UMBCS /D_UNICODE /DUNICODE")

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED on)

set (TARGET_PLATFORM WINDOWS CACHE STRING "Target platform to compile Windows, Linux, etc. (Only Windows (64-bit) supported currently)" FORCE)
set (TARGET_PLATFORM_LOWERCASE windows CACHE STRING "" FORCE)

if(WIN32 AND CMAKE_SIZEOF_VOID_P EQUAL 8)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/lib")
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/lib")
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY "${CMAKE_CURRENT_BINARY_DIR}/bin")

message(STATUS ${CMAKE_LIBRARY_OUTPUT_DIRECTORY})
endif()

set (GAME_PROJECT_NAME TestGame CACHE STRING "Game project name" FORCE)
set(TORC_ENGINE_SOURCE_DIR "${CMAKE_SOURCE_DIR}/Engine" CACHE STRING "Engine Directory" FORCE)
set(TORC_PROJECT_ROOT_DIR "${CMAKE_SOURCE_DIR}" CACHE STRING "Root Directory" FORCE)
file(TO_NATIVE_PATH ${TORC_PROJECT_ROOT_DIR} TORC_PROJECT_ROOT_DIR_NATIVE_OS)
set(TORC_PROJECT_ROOT_DIR_NATIVE_OS "${TORC_PROJECT_ROOT_DIR_NATIVE_OS}" CACHE STRING "Torc Source root path os specific backslashes")
set (TORC_PROJECT_ROOT_DIR_NATIVE_OS_STR "${TORC_PROJECT_ROOT_DIR_NATIVE_OS_STR}" CACHE STRING "")
string(REPLACE "\\" "\\\\" TORC_PROJECT_ROOT_DIR_NATIVE_OS_STR ${TORC_PROJECT_ROOT_DIR_NATIVE_OS})

set(CMAKE_CONFIGURATION_TYPES Debug Release CACHE STRING "" FORCE)

set(TORC_ENGINE_LIB_STATIC TorcEngine CACHE STRING "Main TorcEngine Static Library" FORCE)
set(TORC_ENGINE_LIB_DYNAMIC TorcEngine CACHE STRING "Main TorcEngine Dynamic Library" FORCE)

# set target platform windows(64-bit only), linux, etc
string(TOUPPER "${TARGET_PLATFORM}" TARGET_PLATFORM)
# check and set appropriate compile flag
if("${TARGET_PLATFORM}" STREQUAL "WINDOWS")
	set(TARGET_PLATFORM "Windows")
	add_compile_definitions(${TORC_ENGINE_LIB_STATIC} TORC_PLATFORM_WINDOWS=1)
endif()